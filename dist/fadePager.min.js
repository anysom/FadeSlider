!function(n,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():n.FadeSlider=t()}(this,function(){"use strict";var n=require("lodash/function/throttle.js"),t=require("hammerjs");return function(a){var e,i,s=a.find(".fade-slider__page"),o=a.find(".fade-slider__indicator"),d=0,r=0,c=this,f=function(n,a,e){return n&t.DIRECTION_HORIZONTAL?a:e},l=function(n,t){n.css("transform",t),n.css("mozTransform",t),n.css("webkitTransform",t)},h=function(n){o.removeClass("active"),$(o[n]).addClass("active")},u=n(function(){window.bLazy.revalidate()},400,{leading:!1}),w=function(n,t,e){n=Math.max(0,Math.min(n,s.length-1)),e?a.addClass("animate"):a.removeClass("animate");for(var i,o,r,c,f,h=.25,w=0;w<s.length;w++)r=$(s[w]),t<=0?((w>n||w===n&&e)&&(r.css("opacity",1),o=d/100*(100*(w-n)+t),i="translate3d("+o+"px, 0, 0)",l(r,i)),(w===n&&!e||w===n-1&&e)&&(f=(100+(e?-100:t))/100,c=Math.min((100+h*(e?-100:t))/100,1),r.css("opacity",f),i="scale("+c+")",l(r,i))):(w>=n&&(r.css("opacity",1),o=d/100*(100*(w-n)+t),i="translate3d("+o+"px, 0, 0)",l(r,i)),w===n-1&&(f=(0+(e?-100:t))/100,c=Math.min((100*(1-h)+h*(e?-100:t))/100,1),r.css("opacity",f),i="scale("+c+")",l(r,i)));u()},m=function(n){var a=f(t.DIRECTION_HORIZONTAL,n.deltaX,n.deltaY);if(!(Math.abs(a)<20)){var e=100/d*a,i=!1;"panend"!==n.type&&"pancancel"!==n.type||(Math.abs(e)>20&&"panend"===n.type&&(r+=e<0?1:-1,r=Math.min(r,s.length-1),r=Math.max(r,0)),e=0,i=!0),w(r,e,i),h(r)}},p=function(){e=new t.Manager(a[0]),e.add(new t.Pan({direction:t.DIRECTION_HORIZONTAL,threshold:10})),e.on("panstart panmove panend pancancel",m)},v=function(){if(i!==$(window).width()){i=$(window).width(),d=a.width(),s.width(d);var n=$(window).width()>=window.settings.layoutBreakpoint?window.settings.gutter:window.settings.gutterSmall,t=(d-n)*(380/560),e=$(window).height()-300;t=Math.min(t,e),a.find(".fade-slider__list, .fade-slider__page").height(t);var o,r;for(o=0;o<s.length;o++)r="translate3d("+d*o+"px, 0, 0)",l($(s[o]),r)}},g=function(){v(),p(),a.addClass("initialized"),$(window).on("resize",n(v,50,{leading:!0})),s.each(function(){var n=0,t=$(this),a=t.index();t.on("mousedown",function(t){n=t.clientX||0}),t.on("mouseup",function(t){var e=(t.clientX||0)-n;if(e=Math.abs(e),e<10){var i=a===r?r-1:a;c.goToIndex(i)}})}),a.find(".fade-slider__indicator").on("click",function(){var n=$(this).index();n!==r&&c.goToIndex(n)}),a.find(".fade-slider__indicator").first().addClass("active")};g(),this.goToIndex=function(n){if(!(n<0||n>=s.length)){var t=r-n,e=Math.abs(t),i=0,o=function(){var n=t<0?1:-1;r+=n,w(r,0,!0),i++,h(r),i<e?(a.addClass("linear-ease"),setTimeout(o,250)):setTimeout(function(){a.removeClass("linear-ease")},350)};o()}}}});